#Wrangler Steuerung --env sensibler Trennung zwischen staging und production - opengov
name = "opengov-privacy-api"
main = "worker.mjs"
compatibility_date = "2024-11-01"
account_id = "ba2826d2487315d901dcf1078d091d48"

# Optional: nur f√ºr lokales `wrangler dev` ohne --env 
[vars]
MODE = "mock"
MOCK_BASE = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-mappings/main"
DATA_OWNER = "open-gov-group"
DATA_REPO  = "opengov-privacy-data"
DATA_BASE  = "main"
JWT_ISS = "open-privacy-api"
JWT_AUD = "opengov-privacy-ui"
JWT_ALG = "HS256"
DEFAULT_PROFILE_HREF = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/profiles/profile_intervenability.json"

# Optional Indizes:
# CATALOG_INDEX_URL = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/build/catalogs.index.json"
# PROFILE_INDEX_URL = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/build/profiles.index.json"
TEMPLATE_SSP_HREF = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/ssp/ssp_template_ropa_full.json"

# Secrets (per wrangler secret):
# - GH_TOKEN_DATA
# - APP_API_KEY


# ---- STAGING (Demo / Mock) ----
[env.staging]
[env.staging.vars]
MODE = "mock"

# Mock catalog/ssp bundle source for read-only endpoints
MOCK_BASE = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-mappings/main/build"
DATA_OWNER = "open-gov-group"
DATA_REPO  = "opengov-privacy-data"
DATA_BASE  = "https://api.github.com"

JWT_ISS = "open-privacy-api"
JWT_AUD = "opengov-privacy-ui"
JWT_ALG = "HS256"

# Defaults for UI convenience (both can be changed per-request)
  DEFAULT_PROFILE_HREF = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/profiles/profile_intervenability.json"
  TEMPLATE_SSP_HREF    = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/ssp/ssp_template_ropa.json"


# ---- PRODUCTION (echte Speicherung ins Data-Repo) ----
[env.production]
[env.production.vars]
MODE = "prod"

# In prod meist kein MOCK_BASE notwendig; falls verwendet, gern eigene Release-URL
# Mock catalog/ssp bundle source for read-only endpoints
MOCK_BASE = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-mappings/main/build"
DATA_OWNER = "open-gov-group"
DATA_REPO  = "opengov-privacy-data"
DATA_BASE  = "https://api.github.com"

JWT_ISS = "open-privacy-api"
JWT_AUD = "opengov-privacy-ui"
JWT_ALG = "HS256"

# Defaults for UI convenience (both can be changed per-request)
  DEFAULT_PROFILE_HREF = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/profiles/profile_intervenability.json"
  TEMPLATE_SSP_HREF    = "https://raw.githubusercontent.com/open-gov-group/opengov-privacy-oscal/main/oscal/ssp/ssp_template_ropa.json"





